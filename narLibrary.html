<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">











<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>maven-nar-plugin - Maven NAR Plugin</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
                                                    
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
                                                        
<script type="text/javascript">_uacct = "UA-140879-1";
        urchinTracker();</script>
                    </head>
  <body class="composite">
    <div id="banner">
                  <a href="" id="bannerLeft">
    
                                    <img src="http://maven.apache.org/images/apache-maven-project-2.png" alt="" />
    
            </a>
                        <a href="http://maven.apache.org/" id="bannerRight">
    
                                    <img src="http://maven.apache.org/images/maven-logo-2.gif" alt="" />
    
            </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
          
  

  
    
            
  
    
            <div class="xleft">
          
                <a href="http://www.apache.org/" class="externalLink">Apache</a>
                &gt;
      
                <a href="http://maven.apache.org/index.html" class="externalLink">Maven</a>
                &gt;
      
                <a href="http://maven.apache.org/plugins/index.html" class="externalLink">Plugins</a>
                &gt;
      
                <a href="http://duns.github.com/maven-nar-plugin/" class="externalLink">Maven NAR Plugin</a>
                  </div>
            <div class="xright">            <a href="http://java.freehep.org/maven1.x/freehep-nar-plugin" class="externalLink">NAR Plugin for Maven1</a>
            |
                <a href="http://maven.apache.org/" class="externalLink">Maven</a>
            
  

  
    
            
  
    
            &nbsp;| Last Published: 2009-12-18
              &nbsp;| Version: 2.1-SNAPSHOT
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
           
  

  
    
            
  
    
                   <h5>Overview</h5>
            <ul>
              
    <li class="none">
                    <a href="index.html">Introduction</a>
          </li>
              
    <li class="none">
                    <a href="philosophy.html">Philosophy</a>
          </li>
              
    <li class="none">
                    <a href="NARPlugin.ppt">Presentation (ppt)</a>
          </li>
          </ul>
              <h5>User Info</h5>
            <ul>
              
    <li class="none">
                    <a href="plugin-info.html">Goals</a>
          </li>
              
    <li class="none">
                    <a href="usage.html">Usage</a>
          </li>
              
    <li class="none">
                    <a href="lifecycle.html">Lifecycle</a>
          </li>
              
    <li class="none">
                    <a href="configuration.html">Configuration</a>
          </li>
              
    <li class="none">
                    <a href="faq.html">FAQ</a>
          </li>
              
    <li class="none">
                    <a href="aol.html">AOL Properties</a>
          </li>
              
    <li class="none">
                    <a href="examples.html">Examples</a>
          </li>
              
    <li class="none">
                    <a href="archetypes.html">Archetypes</a>
          </li>
              
    <li class="none">
                    <a href="compatibility.html">Compatibility</a>
          </li>
          </ul>
              <h5>Developer Info</h5>
            <ul>
              
    <li class="none">
                    <a href="narDependencies.html">NAR Dependencies</a>
          </li>
              
    <li class="none">
                    <a href="https://issues.sonatype.org/browse/NAR" class="externalLink">Bug Reports</a>
          </li>
              
    <li class="none">
                    <a href="http://forum.freehep.org/index.php?t=threadt&frm_id=14&rid=4" class="externalLink">Forum</a>
          </li>
              
    <li class="none">
                    <a href="apidocs/index.html">APIDocs</a>
          </li>
              
    <li class="none">
              <strong>NAR Library</strong>
        </li>
              
    <li class="none">
                    <a href="cpptasks.html">CPPTasks</a>
          </li>
              
    <li class="none">
                    <a href="http://github.com/duns/maven-nar-plugin" class="externalLink">Git Browse nar-plugin</a>
          </li>
              
    <li class="none">
                    <a href="http://github.com/duns/cpptasks-parallel" class="externalLink">Git Browse cpptasks</a>
          </li>
              
    <li class="none">
                    <a href="source-repository.html">Git Repository</a>
          </li>
          </ul>
              <h5>Other Information</h5>
            <ul>
              
    <li class="none">
                    <a href="http://docs.codehaus.org/display/MAVEN/Support+for+other+languages" class="externalLink">Maven and other languages</a>
          </li>
          </ul>
                        <h5>Project Documentation</h5>
            <ul>
              
                
              
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-info.html">Project Information</a>
                </li>
              
                
              
      
            
      
            
      
            
      
            
      
              
        <li class="collapsed">
                    <a href="project-reports.html">Project Reports</a>
                </li>
          </ul>
              <h5>Maven Projects</h5>
            <ul>
              
    <li class="none">
                    <a href="http://maven.apache.org/ant-tasks/index.html" class="externalLink">Ant Tasks</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/doxia/index.html" class="externalLink">Doxia</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/jxr/index.html" class="externalLink">JXR</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/maven-1.x/index.html" class="externalLink">Maven 1.x</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/index.html" class="externalLink">Maven 2</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/mercury/index.html" class="externalLink">Mercury</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/plugins/index.html" class="externalLink">Plugins</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/scm/index.html" class="externalLink">SCM</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/shared/index.html" class="externalLink">Shared Components</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/surefire/index.html" class="externalLink">Surefire</a>
          </li>
              
    <li class="none">
                    <a href="http://maven.apache.org/wagon/index.html" class="externalLink">Wagon</a>
          </li>
          </ul>
                                           <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img alt="Built by Maven" src="./images/logos/maven-feather.png"></img>
          </a>
                       
  

  
    
            
  
    
        </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>NAR Library</h2>
<p>Other plugins may need to use some of the functionality of the NAR Plugin, such as downloading and unpacking. The NAR Plugin therefore groups most of its functionality into the NAR Manager and allows other plugins and the NAR Plugin itself to call on the NAR Manager.</p>
<p>The <a class="externalLink" href="http://java.freehep.org/freehep-swig-plugin">SWIG Plugin</a> which needs the swig native executable uses the NAR Manager to download, unpack and call the executable.</p>
<p>To use the NAR Manager, see the <a href="apidocs/index.html">API Docs</a>, add the following to your POM file:</p>
<div class="source"><pre>&lt;project&gt;
  ...
  &lt;dependencies&gt;
    ...
    &lt;dependency&gt;
       &lt;artifactId&gt;maven-nar-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.1-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;</pre>
</div>
<p>and use the code with the following snippet:</p>
<div class="source"><pre>import org.apache.maven.artifact.repository.ArtifactRepository;
import org.apache.maven.plugin.AbstractMojo;
import org.apache.maven.plugin.MojoExecutionException;
import org.apache.maven.plugin.MojoFailureException;
import org.apache.maven.project.MavenProject;
import org.apache.maven.plugin.nar.Linker;
import org.apache.maven.plugin.nar.NarManager;
import org.apache.maven.plugin.nar.NarUtil;

/**
 * Description...
 * 
 * @goal your-goal
 * @phase your-phase
 * @requiresDependencyResolution compile
 */
public class YourMojo extends AbstractMojo {

    /**
     * Level of logging messages, 0 is minimum.
     * 
     * @parameter expression=&quot;${logLevel}&quot; default-value=&quot;0&quot;
     */
    private int logLevel;

    /**
     * @parameter expression=&quot;${localRepository}&quot;
     * @required
     * @readonly
     */
    private ArtifactRepository localRepository;

    /**
     * @parameter expression=&quot;${project}&quot;
     * @required
     * @readonly
     */
    private MavenProject project;

    /**
     * The Architecture for picking up swig, Some choices are: &quot;x86&quot;, &quot;i386&quot;,
     * &quot;amd64&quot;, &quot;ppc&quot;, &quot;sparc&quot;, ... Defaults to ${os.arch}
     * 
     * @parameter expression=&quot;${os.arch}&quot;
     * @required
     */
    private String architecture;

    /**
     * The Operating System for picking up swig. Some choices are: &quot;Windows&quot;,
     * &quot;Linux&quot;, &quot;MacOSX&quot;, &quot;SunOS&quot;, ... Defaults to a derived value from
     * ${os.name}
     * 
     * @parameter expression=&quot;&quot;
     */
    private String os;

    private NarManager narManager;

    public void execute() throws MojoExecutionException, MojoFailureException {

        os = NarUtil.getOS(os);
                // FIXME, should have some function in NarUtil
        Linker linker = new Linker(&quot;g++&quot;);
        narManager = new NarManager(getLog(), logLevel, localRepository, project,
            architecture, os, linker);

        ... DO WHATEVER YOU NEED WITH THE NarManager
    }
}</pre>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2002-2009
    
          The Apache Software Foundation
          
  

  
    
            
  
    
   - <a href="http://maven.apache.org/privacy-policy.html">Privacy Policy</a></div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
